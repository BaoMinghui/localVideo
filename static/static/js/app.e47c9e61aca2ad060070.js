webpackJsonp([1],{"5GxN":function(t,e){},B0ut:function(t,e){},B3ST:function(t,e){},M2E0:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={};n.d(r,"getList",function(){return Y}),n.d(r,"getRandomList",function(){return A}),n.d(r,"getScore",function(){return H}),n.d(r,"isDelete",function(){return q}),n.d(r,"setScore",function(){return G}),n.d(r,"recycleBin",function(){return P}),n.d(r,"deleteVideo",function(){return U}),n.d(r,"reviewVideo",function(){return K}),n.d(r,"getName",function(){return Q}),n.d(r,"renewVideodb",function(){return W}),n.d(r,"searchVideo",function(){return X});var a=n("IvJb"),i=(n("B0ut"),{render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-header",{staticClass:"centent"},[n("el-button",{staticClass:"el-icon-arrow-left hidden-md-and-up",on:{click:t.go_back}}),t._v(" "),n("el-input",{staticClass:"input_box",attrs:{placeholder:"tag搜索",sm:8,"prefix-icon":"el-icon-search"},on:{change:function(e){t.search(t.value)}},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),t._v(" "),n("el-button",{staticClass:"hidden-sm-and-down",attrs:{type:"primary",icon:"el-icon-delete"}},[t._v("回收站")]),t._v(" "),n("el-button",{staticClass:"hidden-sm-and-down",attrs:{type:"primary"},on:{click:t.goto_home}},[t._v("首页")])],1)},staticRenderFns:[]});var o={name:"App",components:{topTool:n("C7Lr")({data:function(){return{tag:""}},methods:{goto_home:function(){this.$router.push("/")},go_back:function(){this.$router.go(-1)},search:function(t){this.$store.dispatch("searchVideo",t)}}},i,!1,function(t){n("5GxN")},"data-v-52760bd2",null).exports}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-container",{attrs:{id:"app"}},[e("top-tool",{ref:"topTool"}),this._v(" "),e("router-view",{staticClass:"router-view"})],1)},staticRenderFns:[]};var c=n("C7Lr")(o,s,!1,function(t){n("pI75")},null,null).exports,u=n("zO6J"),d={name:"video_item",props:{item:{type:Object}},data:function(){return{}},methods:{turn_to:function(){this.$router.push({name:"video",params:{id:this.item.id}})},img_url:function(){return"/video/img/"+this.item.id}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"video",on:{click:function(e){t.turn_to(t.item.id)}}},[n("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[n("div",[n("img",{attrs:{alt:t.item.name,src:t.img_url()}})]),t._v(" "),n("p",{staticClass:"video_name"},[t._v("\n      "+t._s(t.item.name)+"\n    ")])])],1)},staticRenderFns:[]};var f=n("C7Lr")(d,l,!1,function(t){n("M2E0")},"data-v-803763ee",null).exports,p={data:function(){return{tag:[]}},computed:{videoList:function(){return this.$store.state.videolist},total:function(){return this.$store.state.total},limit:function(){return this.$store.state.page_size},page:function(){return this.$store.state.page}},methods:{getStatus:function(t){var e=t.split("/");return Number(e[e.length-1])},getData:function(){this.$store.dispatch("getVideoList"),window.scrollTo(0,0),this.$router.push("/page/"+this.page)},page_size_change:function(t){this.$store.commit("page_size_change",t),this.limit=t,this.getData()},set_key:function(t){return t.name},page_change_add:function(){this.$store.commit("page_change_add"),this.getData()},page_change_sub:function(){this.$store.commit("page_change_sub"),this.getData()},page_change:function(t){this.$store.commit("page_change",t),this.getData()}},mounted:function(){this.getData()},components:{videoItem:f},watch:{$route:function(t,e){this.page_change(this.getStatus(this.$route.path))}},created:function(){this.getData()}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("el-row",{attrs:{type:"flex",justify:"left"}},[n("el-col",{staticClass:"video_area"},t._l(t.videoList,function(e){return n("videoItem",{key:t.set_key(e),attrs:{item:e}})}))],1),t._v(" "),n("el-pagination",{staticClass:"pagetag",attrs:{background:"",layout:"prev, pager, next,sizes","page-size":t.limit,"page-sizes":[10,20,30],"pager-count":5,"page-count":t.total,"current-page":t.page},on:{"current-change":t.page_change,"prev-click":t.page_change_sub,"next-click":t.page_change_add,"size-change":t.page_size_change}})],1)},staticRenderFns:[]};var g=n("C7Lr")(p,h,!1,function(t){n("NigM")},null,null).exports,m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{staticClass:"video_tool"},[n("el-col",{staticClass:"tag"},t._l(t.tags,function(e){return n("el-tag",{attrs:{type:"success",hit:""}},[t._v("\n        "+t._s(e)+"\n      ")])})),t._v(" "),n("el-col",{staticClass:"rate-box",attrs:{span:6}},[n("span",[t._v("评分")]),t._v(" "),n("el-rate",{staticClass:"rate",attrs:{"allow-half":"","void-color":"#aaa",disabled:t.disabled},on:{change:function(e){t.setScore()}},model:{value:t.score,callback:function(e){t.score=e},expression:"score"}})],1),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-delete",disabled:t.deleted},on:{click:t.delete_video}})],1)],1)},staticRenderFns:[]};var v={data:function(){return{videos:[]}},computed:{randomVideos:function(){return this.$store.state.randomVideoList}},methods:{set_key:function(t){return t.name},get_random_video:function(){this.$store.dispatch("getRandomList")}},mounted:function(){this.get_random_video()},components:{videotag:f}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"random-page"},t._l(t.randomVideos,function(e){return n("videotag",{key:t.set_key(e),attrs:{item:e}})}))},staticRenderFns:[]};var b={props:["id"],data:function(){return{url:"",videoid:"",name:""}},methods:{video_url:function(){return"/video/"+this.id},get_name:function(){var t=this;this.$http.get("/video/name",{params:{id:this.id}}).then(function(e){t.name=e.data})},getStatus:function(t){var e=t.split("/");return Number(e[e.length-1])}},mounted:function(){this.get_name()},watch:{$route:function(t,e){this.get_name()}},components:{videoTool:n("C7Lr")({props:["id"],data:function(){return{tags:[],score:0,disabled:!1,deleted:!1}},methods:{setScore:function(){this.$store.dispatch("setScore",{id:this.id,score:this.score})&&(this.disabled=!0)},getScore:function(){var t=this.$store.dispatch("getScore",this.id);t.status?(this.score=t.score,this.disabled=!0):this.disabled=!1},delete_video:function(){this.$store.dispatch("deleteVideo",this.id)?(this.$message("删除成功"),this.$router.push("/")):this.$message({message:"删除失败",type:"error"})},isDeleted:function(){return this.$store.dispatch("isDelete",this.id)}},mounted:function(){this.getScore(),this.isDeleted()}},m,!1,function(t){n("uy9f")},null,null).exports,randomVideo:n("C7Lr")(v,_,!1,function(t){n("T7ex")},null,null).exports}},x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{staticClass:"centent",attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{xl:14}},[n("h2",{key:t.id},[t._v(t._s(t.name))]),t._v(" "),n("video",{staticClass:"video_box",attrs:{src:t.video_url(),controls:""}}),t._v(" "),n("video-tool",{ref:"videoTool",attrs:{id:t.id}}),t._v(" "),n("random-video",{ref:"randomVideo"})],1)],1)},staticRenderFns:[]};var w=n("C7Lr")(b,x,!1,function(t){n("B3ST")},null,null).exports;a.default.use(u.a);var y=new u.a({routes:[{path:"/",name:"index",redirect:{path:"/page/1"}},{path:"/video/:id",name:"video",component:w,props:!0},{path:"/page/:page",name:"page",component:g}]}),k=n("rVsN"),$=n.n(k),C=n("aozt"),L=n.n(C),V=n("Umb+"),z=n.n(V),S=L.a.create();S.interceptors.request.use(function(t){return"post"!==t.method&&"get"!==t.method&&"delete"!==t.method&&"put"!==t.method||(t.data=z.a.stringify(t.data)),t},function(t){return $.a.reject(t)}),S.interceptors.response.use(function(t){return t},function(t){return $.a.reject(t)});var D=S,T=n("H93t"),N=n.n(T),R=(n("TsY+"),n("YTJj")),E=n.n(R),B=n("lC5x"),j=n.n(B),F=n("J0Oq"),M=n.n(F),I=n("9rMa"),J=n("4YfN"),O=n.n(J);function Y(t){return D.get("/video",{params:t}).then(function(t){return t.data})}function A(t){return D.get("/video/random",{params:t}).then(function(t){return t.data})}function H(t){return D.get("/video/score",{params:t}).then(function(t){return t.data})}function q(t){return D.get("/video/isdeleted",{params:t}).then(function(t){return t.data})}function G(t){return D.put("/video/setScore",O()({},t)).then(function(t){return t.data})}function P(t){return D.get("/video/recycleBin",{params:t}).then(function(t){return t.data})}function U(t){return D.delete("/video/"+t).then(function(t){return t.data})}function K(t){return D.put("/video/"+t).then(function(t){return t.data})}function Q(t){return D.get("/video/name",{params:t}).then(function(t){return t.data})}function W(){return D.put("/video/renew").then(res.data)}function X(t){return D.get("/video/search",{params:t}).then(res.data)}var Z=r;a.default.use(I.a);var tt=new I.a.Store({state:{page:1,total:1,page_size:10,videolist:[],randomVideoList:[],randomListLength:3,resycle_page:1,resycle_page_size:10,resycle_list:[]},mutations:{page_change_add:function(t){t.page++},page_change_sub:function(t){t.page--},page_change:function(t,e){t.page=e},page_size_change:function(t,e){t.page_size=e},change_list:function(t,e){t.videolist=e},change_random_list:function(t,e){t.randomVideoList=e},change_total:function(t,e){t.total=e},change_resycle_list:function(t,e){t.resycle_list=e},change_resycle_page_size:function(t,e){t.resycle_page_size=e}},actions:{getVideoList:function(t){var e=this,n=t.commit,r=t.state;return M()(j.a.mark(function t(){var a,i,o;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z.getList({page:r.page,limit:r.page_size}).catch(function(t){return console.log(t)});case 2:(a=t.sent)&&(i=a.list,o=a.total,n("change_list",i),n("change_total",o));case 4:case"end":return t.stop()}},t,e)}))()},getRandomList:function(t){var e=this,n=t.commit,r=t.state;return M()(j.a.mark(function t(){var a,i;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z.getRandomList({limit:r.randomListLength}).catch(function(t){return console.log(t)});case 2:(a=t.sent)&&(i=a.list,n("change_random_list",i));case 4:case"end":return t.stop()}},t,e)}))()},getScore:function(t,e){var n=this;return E()(t),M()(j.a.mark(function t(){var r;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z.getScore({id:e}).catch(function(t){return console.log(t)});case 2:if(!(r=t.sent).status){t.next=5;break}return t.abrupt("return",r.score);case 5:case"end":return t.stop()}},t,n)}))()},setScore:function(t,e){var n=this,r=e.id,a=e.score;return E()(t),M()(j.a.mark(function t(){var e;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z.setScore({id:r,score:a}).catch(function(t){return console.log(t)});case 2:if(!(e=t.sent)){t.next=5;break}return t.abrupt("return",e.score);case 5:case"end":return t.stop()}},t,n)}))()},isDelete:function(t,e){var n=this;return E()(t),M()(j.a.mark(function t(){var r;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z.isDelete({id:e}).catch(function(t){return console.log(t)});case 2:if(!(r=t.sent)){t.next=5;break}return t.abrupt("return",r.deleted);case 5:case"end":return t.stop()}},t,n)}))()},recycleBin:function(t){var e=this,n=t.commit,r=t.state;return M()(j.a.mark(function t(){var a,i,o;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z.recycleBin({page:r.resycle_page,limit:r.resycle_page_size}).catch(function(t){return console.log(t)});case 2:(a=t.sent)&&(i=a.list,o=a.total,n("change_resycle_list",i),n("change_resycle_page_size",o));case 4:case"end":return t.stop()}},t,e)}))()},deleteVideo:function(t,e){var n=this;return E()(t),M()(j.a.mark(function t(){var r;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e),!(r=Z.deleteVideo(e).catch(function(t){return console.log(t)}))){t.next=4;break}return t.abrupt("return",r.status);case 4:case"end":return t.stop()}},t,n)}))()},backout_delete:function(t,e){var n=this;return E()(t),M()(j.a.mark(function t(){var r;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=Z.reviewVideo(e).catch(function(t){return console.log(t)}))){t.next=3;break}return t.abrupt("return",r.deleted);case 3:case"end":return t.stop()}},t,n)}))()},get_name:function(t,e){var n=this;return E()(t),M()(j.a.mark(function t(){var r;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=Z.getName({id:e}).catch(function(t){return console.log(t)}))){t.next=3;break}return t.abrupt("return",r.name);case 3:case"end":return t.stop()}},t,n)}))()},search_video:function(t,e){var n=this,r=t.commit;return M()(j.a.mark(function t(){var a;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(a=Z.search_video({tag:e}).catch(function(t){return console.log(t)}))&&r("change_list",a.list);case 2:case"end":return t.stop()}},t,n)}))()},renewVideodb:function(){var t=this;return M()(j.a.mark(function e(){var n;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=Z.renewVideodb().catch(function(t){return console.log(t)}))){t.next=3;break}return t.abrupt("return",n.status);case 3:case"end":return t.stop()}},e,t)}))()}}});a.default.use(N.a),a.default.prototype.$http=D,a.default.prototype.$store=tt,a.default.config.productionTip=!1,new a.default({el:"#app",router:y,components:{App:c},template:"<App/>"})},NigM:function(t,e){},T7ex:function(t,e){},"TsY+":function(t,e){},pI75:function(t,e){},uy9f:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e47c9e61aca2ad060070.js.map